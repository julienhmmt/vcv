<section class="admin-panel-surface">
  {{if .SuccessText}}
    <div class="admin-alert admin-alert-success" role="status">âœ… {{.SuccessText}}</div>
  {{end}}
  {{if .ErrorText}}
    <div class="admin-alert admin-alert-error" role="alert">âš ï¸ {{.ErrorText}}</div>
  {{end}}

  <div class="admin-card-header">
    <h2 class="admin-card-title"><span class="admin-card-title-icon">âš™ï¸</span> {{.Messages.AdminSettings}}</h2>
    <div class="admin-actions">
      <button class="vcv-button vcv-button-secondary" type="button" onclick="VCV.openDocumentationModal('admin')" aria-label="{{.Messages.ButtonDocumentation}}">ğŸ“– {{.Messages.ButtonDocumentation}}</button>
      <button class="vcv-button vcv-button-secondary" type="button" hx-post="/admin/logout" hx-target="#admin-root" hx-swap="innerHTML">{{.Messages.AdminLogout}}</button>
    </div>
  </div>

  <form id="admin-settings-form" class="admin-form" hx-post="/admin/settings" hx-target="#admin-root" hx-swap="innerHTML">
    <fieldset class="admin-fieldset">
      <legend class="admin-legend"><span class="admin-legend-icon">ğŸ”’</span> {{.Messages.AdminCertificates}}</legend>
      <span class="admin-field-hint">{{.Messages.AdminThresholdsHint}}</span>
      <div class="admin-grid">
        <div class="admin-form-row">
          <label class="admin-label" for="settings-expire-critical">{{.Messages.AdminCriticalThreshold}}</label>
          <input class="vcv-input" id="settings-expire-critical" name="expire_critical" type="number" min="1" max="3650" value="{{.Settings.Certificates.ExpirationThresholds.Critical}}" />
        </div>
        <div class="admin-form-row">
          <label class="admin-label" for="settings-expire-warning">{{.Messages.AdminWarningThreshold}}</label>
          <input class="vcv-input" id="settings-expire-warning" name="expire_warning" type="number" min="1" max="3650" value="{{.Settings.Certificates.ExpirationThresholds.Warning}}" />
        </div>
      </div>
    </fieldset>

    <fieldset class="admin-fieldset">
      <legend class="admin-legend"><span class="admin-legend-icon">ğŸŒ</span> {{.Messages.AdminCORS}}</legend>
      <div class="admin-grid">
        <div class="admin-form-row admin-form-row-full">
          <label class="admin-label" for="settings-cors-origins">{{.Messages.AdminCORSOrigins}}</label>
          <textarea class="vcv-input admin-textarea" id="settings-cors-origins" name="cors_origins" rows="3" placeholder="{{.Messages.AdminCORSOriginsHint}}">{{.CorsOriginsText}}</textarea>
        </div>
      </div>
    </fieldset>

    <fieldset class="admin-fieldset">
      <legend class="admin-legend"><span class="admin-legend-icon">ğŸ›ï¸</span> {{.Messages.AdminVaults}}</legend>
      <div class="admin-section-header">
        <div class="admin-section-hint">{{.Messages.AdminVaultsHint}}</div>
        <div class="admin-actions">
          <button class="vcv-button vcv-button-secondary" type="button" hx-post="/admin/vault/add" hx-target="#admin-vaults-list" hx-swap="beforeend" hx-on::after-request="var e=document.getElementById('admin-vaults-empty');if(e)e.remove()">+ {{.Messages.AdminAddVault}}</button>
        </div>
      </div>
      <div id="admin-vaults-list" class="admin-vaults-list">
        {{if .VaultViews}}
          {{range .VaultViews}}
            {{template "admin-vault-item.html" .}}
          {{end}}
        {{else}}
          <div class="admin-empty-state" id="admin-vaults-empty"><div class="admin-empty-state-icon">ğŸ›ï¸</div>{{.Messages.AdminVaultsEmpty}}</div>
        {{end}}
      </div>
    </fieldset>

    <div class="admin-actions admin-actions-space">
      <button class="vcv-button vcv-button-primary" type="submit">{{.Messages.AdminSaveSettings}}</button>
    </div>

    <div class="admin-note">
      {{.Messages.AdminRestartNote}}
    </div>
  </form>
</section>
